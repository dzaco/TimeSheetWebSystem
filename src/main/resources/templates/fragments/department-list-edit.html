<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pl">

<head lang="pl">
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<div th:fragment="content">
    <form action="#" th:action='${"/users/getAllUserItems/"+ exManagerId +"/edit"}' method="post">

        <h3 th:if="${departments}" class="mr-auto">Działy</h3>
        <th:block th:each="department : ${departments}">
            <div class="container">

                <div class="name-header">
                    <div class="circ float-left">
                        <div class="circ-initials"><i class="icon-sitemap"></i></div>
                    </div>
                    <div th:text='${department.getName()}' class="name-label">Name</div>
                </div>
                <div class="float-none"></div>
                <br><br>

                <table class="table">
                    <tbody>
                    <tr>
                        <td><i class="icon-sort-numeric"></i>Numer ID:</td>
                        <td th:text="${department.getId()}"></td>
                    </tr>

                    <tr>
                        <td><i class="icon-sitemap"></i>Nazwa:</td>
                        <td th:text="${department.getName()}"></td>
                    </tr>

                    <tr>
                        <td><i class="icon-user-circle-o"></i>Dyrektor:</td>
                        <td>
                            <select class="form-control form-control-sm" name="departmentManagerId">
                                <option th:each="user : ${users}"
                                        th:value="${user.getId()}" th:text="${user.getName()}"
                                        th:selected="${user.getId() == department.getSuperior().getId()}"></option>
                            </select>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </th:block>

        <h3 th:if="${projects}" class="mr-auto">Projekty</h3>
        <th:block th:each="project : ${projects}">
            <div class="container">
                <div class="name-header">
                    <div class="circ float-left">
                        <div class="circ-initials"><i class="icon-cube"></i></div>
                    </div>
                    <div th:text='${project.getName()}' class="name-label">Name</div>
                </div>
                <div class="float-none"></div>
                <br><br>

                <table class="table">
                    <tbody>
                    <tr>
                        <td><i class="icon-sort-numeric"></i>Numer ID:</td>
                        <td th:text="${project.getId()}"></td>
                    </tr>
                    <tr>
                        <td><i class="icon-sort-numeric"></i>Kod:</td>
                        <td th:text="${project.getCode()}"></td>
                    </tr>
                    <tr>
                        <td><i class="icon-cube"></i>Nazwa:</td>
                        <td th:text='${project.getName()}'></td>
                    </tr>

                    <tr>
                        <td><i class="icon-user-circle-o"></i>Kierownik:</td>
                        <td>
                            <select class="form-control form-control-sm" name="projectManagerId">
                                <option th:each="user : ${users}"
                                        th:value="${user.getId()}" th:text="${user.getName()}"
                                        th:selected="${user.getId() == project.getManager().getId()}"></option>
                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td><i class="icon-clock-1"></i>Data rozpoczęcia:</td>
                        <td th:text='${project.getStartDate()}'></td>
                    </tr>

                    <tr>
                        <td><i class="icon-clock"></i>Data zakończenia:</td>
                        <td th:text='${project.getEndDate() != null ? project.getEndDate().toString() : "Nie określono"}'></td>
                    </tr>

                    <tr>
                        <td><i class="icon-comment"></i>Komentarz:</td>
                        <td th:text="${project.getOther()}"></td>
                    </tr>

                    </tbody>
                </table>
            </div>
        </th:block>

        <button type="submit" class="btn btn-outline-success float-right"><i class="icon-floppy"></i>Zapisz</button>
    </form>

</div>

</body>
</html>